
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Running the Build &#8212; HTPolyNet 0.0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="DGEBA-PACM Thermoset" href="../2-DGEBA-PACM/index.html" />
    <link rel="prev" title="The Configuration File" href="configuration.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="running-the-build">
<span id="pms-run"></span><h1>Running the Build<a class="headerlink" href="#running-the-build" title="Permalink to this headline">¶</a></h1>
<p>Now, in our working directory <code class="docutils literal notranslate"><span class="pre">my_pms</span></code>, if you haven’t already, go ahead and launch via <code class="docutils literal notranslate"><span class="pre">./run.sh</span></code>.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>./run.sh
</pre></div>
</div>
<p>As the two <code class="docutils literal notranslate"><span class="pre">htpolynet</span> <span class="pre">run</span></code> commands indicate, standard output is being redirected from the console to the file <code class="docutils literal notranslate"><span class="pre">lo.log</span></code> for the low-cure run and <code class="docutils literal notranslate"><span class="pre">hi.log</span></code> for the high-cure run.  Let’s consider the contents of <code class="docutils literal notranslate"><span class="pre">lo.log</span></code> and then examine the project directory that was created.</p>
<section id="console-output">
<h2>Console output<a class="headerlink" href="#console-output" title="Permalink to this headline">¶</a></h2>
<p>In this section, let’s go section by section through the console log to understand what <code class="docutils literal notranslate"><span class="pre">HTPolyNet</span></code> is doing.  The first section just shows a banner and indicates where the library is and where the project directory is, then reports on the available Ambertools software, finally ending by stating the name of the configuration file.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">INFO&gt;</span>
<span class="go">INFO&gt;     HTPolyNet 1.0.0</span>
<span class="go">INFO&gt;     https://abramsgroup.github.io/HTPolyNet/</span>
<span class="go">INFO&gt;</span>
<span class="go">INFO&gt;     Ming Huang</span>
<span class="go">INFO&gt;     mh3429@dragons.drexel.edu</span>
<span class="go">INFO&gt;</span>
<span class="go">INFO&gt;     Cameron F. Abrams</span>
<span class="go">INFO&gt;     cfa22@drexel.edu</span>
<span class="go">INFO&gt;</span>
<span class="go">INFO&gt;     Supported in part by Grants W911NF-17-2-0227</span>
<span class="go">INFO&gt;     and W911NF-12-R-0011 from the US Army Research Lab</span>
<span class="go">INFO&gt;</span>
<span class="go">INFO&gt; ******************** HTPolyNet runtime begins *********************</span>
<span class="go">INFO&gt; User library is /home/cfa/htpolynet-tests/test-2/2-polymethylstyrene/lib</span>
<span class="go">INFO&gt; Starting new build in /home/cfa/htpolynet-tests/test-2/2-polymethylstyrene/proj-0</span>
<span class="go">INFO&gt; *************************** Ambertools: ***************************</span>
<span class="go">INFO&gt;   antechamber (ver. 22.0) at antechamber</span>
<span class="go">INFO&gt;         tleap (ver. 22.0) at tleap</span>
<span class="go">INFO&gt;      parmchk2 (ver. 22.0) at parmchk2</span>
<span class="go">INFO&gt; Configuration: pMSTY-lo.yaml</span>
</pre></div>
</div>
<p>Next comes the monomer and oligomer template parameterizations.  <code class="docutils literal notranslate"><span class="pre">HTPolyNet</span></code> first handles the molecules that are explicitly named in the configuration.  Only <code class="docutils literal notranslate"><span class="pre">EMB.mol2</span></code> exists; the other two are generated automatically using their respective <code class="docutils literal notranslate"><span class="pre">reaction</span></code> directives.  The three molecules implied by the concept of “chaining” are also generated and parameterized.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">INFO&gt; *********** Templates in proj-0/molecules/parameterized ***********</span>
<span class="go">INFO&gt; 3 molecules explicit in pMSTY-lo.yaml</span>
<span class="go">INFO&gt; AmberTools&gt; parameterizing EMB.mol2</span>
<span class="go">INFO&gt; AmberTools&gt; parameterizing EMB~C1-C2~EMB.mol2</span>
<span class="go">INFO&gt; AmberTools&gt; parameterizing EMBCC.mol2</span>
<span class="go">INFO&gt; 3 molecules implied by chaining</span>
<span class="go">INFO&gt; [&#39;EMB~C1=C2~EMB~C1-C2~EMB&#39;, &#39;EMB~C1-C2~EMB~C1=C2~EMB&#39;, &#39;EMB~C1-C2~EMB~C1=C2~EMB~C1-C2~EMB&#39;]</span>
<span class="go">INFO&gt; AmberTools&gt; parameterizing EMB~C1=C2~EMB~C1-C2~EMB.mol2</span>
<span class="go">INFO&gt; AmberTools&gt; parameterizing EMB~C1-C2~EMB~C1=C2~EMB.mol2</span>
<span class="go">INFO&gt; AmberTools&gt; parameterizing EMB~C1-C2~EMB~C1=C2~EMB~C1-C2~EMB.mol2</span>
<span class="go">INFO&gt; Generated 6 molecule templates</span>
<span class="go">INFO&gt; Initial composition is EMB 100</span>
<span class="go">INFO&gt; 100% conversion is 100 bonds</span>
</pre></div>
</div>
<p>If we look in <code class="docutils literal notranslate"><span class="pre">proj-0/molecules/parameterized</span></code> we’ll see a LOT of files.  What’s important are the <code class="docutils literal notranslate"><span class="pre">gro</span></code>, <code class="docutils literal notranslate"><span class="pre">itp</span></code>, <code class="docutils literal notranslate"><span class="pre">top</span></code> and <code class="docutils literal notranslate"><span class="pre">grx</span></code> files for each molecule.  The first three are Gromacs-specific.  The <code class="docutils literal notranslate"><span class="pre">grx</span></code> file contains “extended attributes” of each atom that <code class="docutils literal notranslate"><span class="pre">HTPolyNet</span></code> uses internally and are NOT needed for Gromacs.</p>
<p>Next comes initialization of the system topology and coordinates.  Here, using the <code class="docutils literal notranslate"><span class="pre">constituents</span></code> directive, <code class="docutils literal notranslate"><span class="pre">HTPolyNet</span></code> generates a full system topology and simulation box. The box is filled according to the <code class="docutils literal notranslate"><span class="pre">initial_density</span></code> subdirective of the <code class="docutils literal notranslate"><span class="pre">densification</span></code> directive.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">INFO&gt; ************** Initialization in proj-0/systems/init **************</span>
<span class="go">INFO&gt; Topology &quot;init.top&quot; in proj-0/systems/init</span>
<span class="go">INFO&gt; Initial density: 300.0 kg/m^3</span>
<span class="go">INFO&gt; Total mass: 1.996e-23 kg</span>
<span class="go">INFO&gt; Box aspect ratio: 1.0 x 1.0 x 1.0</span>
<span class="go">INFO&gt; Initial box side lengths: 4.052 nm x 4.052 nm x 4.052 nm</span>
<span class="go">INFO&gt; Coordinates &quot;init.gro&quot; in proj-0/systems/init</span>
<span class="go">INFO&gt; Extended attributes &quot;init.grx&quot; in proj-0/systems/init</span>
</pre></div>
</div>
<p>Next comes a report of the densification of the system.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">INFO&gt; ********** Densification in proj-0/systems/densification **********</span>
<span class="go">INFO&gt; Running Gromacs: minimization</span>
<span class="go">INFO&gt; Running Gromacs: nvt ensemble;   10 ps, 300 K</span>
<span class="go">INFO&gt; Running Gromacs: npt ensemble;  200 ps, 300 K, 10 bar</span>
<span class="go">INFO&gt; Current box side lengths: 2.890 nm x 2.890 nm x 2.890 nm</span>
<span class="go">INFO&gt; Density                       826.996948</span>
<span class="go">INFO&gt; Running-average-Density       728.728314</span>
<span class="go">INFO&gt; Rolling-10-average-Density    828.510007</span>
<span class="go">INFO&gt; Densified coordinates in proj-0/systems/densification/densified-npt.gro</span>
</pre></div>
</div>
<p>Next comes a report of the precure:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">INFO&gt; **************** Precure in proj-0/systems/precure ****************</span>
<span class="go">INFO&gt; Running Gromacs: npt ensemble;  200 ps, 300 K, 1 bar</span>
<span class="go">INFO&gt; Current box side lengths: 2.887 nm x 2.887 nm x 2.887 nm</span>
<span class="go">INFO&gt; Density                       829.116699</span>
<span class="go">INFO&gt; Running-average-Density       828.608087</span>
<span class="go">INFO&gt; Rolling-10-average-Density    831.531906</span>
<span class="go">INFO&gt; Annealing: 5 points for 2 cycles over 160 ps</span>
<span class="go">INFO&gt; Annealed coordinates in annealed.gro</span>
<span class="go">INFO&gt; Running Gromacs: npt ensemble;  100 ps, 300 K, 1 bar</span>
<span class="go">INFO&gt; Current box side lengths: 2.885 nm x 2.885 nm x 2.885 nm</span>
<span class="go">INFO&gt; Density                       830.845398</span>
<span class="go">INFO&gt; Running-average-Density       833.242340</span>
<span class="go">INFO&gt; Rolling-10-average-Density    831.299469</span>
</pre></div>
</div>
<p>Next we begin the CURE iterations:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">INFO&gt; ********* Connect-Update-Relax-Equilibrate (CURE) begins **********</span>
<span class="go">INFO&gt; Attempting to form 50 bonds</span>
<span class="go">INFO&gt; ~~~~~~~~~~~~~~~~~~~~~~~ Iteration 1 begins ~~~~~~~~~~~~~~~~~~~~~~~~</span>
<span class="go">INFO&gt; Bond search using radius 0.5 nm initiated</span>
<span class="go">INFO&gt; Iteration 1 will generate 31 new bonds</span>
<span class="go">INFO&gt; Cure_relax initiated on 31 distances (max 0.485 nm)</span>
<span class="go">INFO&gt;      Stage  Max-distance (nm)  Max-1-4-distance (nm)</span>
<span class="go">INFO&gt;          1              0.428                  0.639</span>
<span class="go">INFO&gt;          2              0.397                  0.620</span>
<span class="go">INFO&gt;          3              0.314                  0.538</span>
<span class="go">INFO&gt;          4              0.263                  0.509</span>
<span class="go">INFO&gt;          5              0.212                  0.444</span>
<span class="go">INFO&gt;          6              0.163                  0.420</span>
<span class="go">INFO&gt; Running Gromacs: npt ensemble;  100 ps, 300 K, 1 bar</span>
<span class="go">INFO&gt; Current box side lengths: 2.814 nm x 2.814 nm x 2.814 nm</span>
<span class="go">INFO&gt; Density                       891.040100</span>
<span class="go">INFO&gt; Running-average-Density       837.843547</span>
<span class="go">INFO&gt; Rolling-10-average-Density    887.186151</span>
<span class="go">INFO&gt; Iteration 1 current conversion 0.310 or 31 bonds</span>
</pre></div>
</div>
<p>This first iteration shows that, with a search radius of 0.5 nm, <code class="docutils literal notranslate"><span class="pre">HTPolyNet</span></code> identified 31 allowable bonds that could form.  It then forms them and progresses through the relaxation stages until they are at their correct lenghts.  Finally it runs the post-iteration NPT MD equilibration, reporting the resulting box dimensions and density.</p>
<p>Next we proceed through a second CURE iteration:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">INFO&gt; ~~~~~~~~~~~~~~~~~~~~~~~ Iteration 2 begins ~~~~~~~~~~~~~~~~~~~~~~~~</span>
<span class="go">INFO&gt; Bond search using radius 0.5 nm initiated</span>
<span class="go">INFO&gt; Iteration 2 will generate 20 new bonds</span>
<span class="go">INFO&gt; Cure_relax initiated on 20 distances (max 0.444 nm)</span>
<span class="go">INFO&gt;      Stage  Max-distance (nm)  Max-1-4-distance (nm)</span>
<span class="go">INFO&gt;          1              0.388                  0.624</span>
<span class="go">INFO&gt;          2              0.340                  0.574</span>
<span class="go">INFO&gt;          3              0.271                  0.511</span>
<span class="go">INFO&gt;          4              0.221                  0.464</span>
<span class="go">INFO&gt;          5              0.163                  0.412</span>
<span class="go">INFO&gt; Running Gromacs: npt ensemble;  100 ps, 300 K, 1 bar</span>
<span class="go">INFO&gt; Current box side lengths: 2.770 nm x 2.770 nm x 2.770 nm</span>
<span class="go">INFO&gt; Density                       931.056519</span>
<span class="go">INFO&gt; Running-average-Density       890.387364</span>
<span class="go">INFO&gt; Rolling-10-average-Density    929.248755</span>
<span class="go">INFO&gt; Iteration 2 current conversion 0.510 or 51 bonds</span>
<span class="go">INFO&gt; ************************* Capping begins **************************</span>
<span class="go">INFO&gt; Capping will generate 0 new bonds</span>
<span class="go">INFO&gt; ********** Connect-Update-Relax-Equilibrate (CURE) ends ***********</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">INFO&gt; *************** Postcure in proj-0/systems/postcure ***************</span>
<span class="go">INFO&gt; Annealing: 5 points for 2 cycles over 160 ps</span>
<span class="go">INFO&gt; Annealed coordinates in annealed.gro</span>
<span class="go">INFO&gt; Running Gromacs: npt ensemble;  100 ps, 300 K, 1 bar</span>
<span class="go">INFO&gt; Current box side lengths: 2.763 nm x 2.763 nm x 2.763 nm</span>
<span class="go">INFO&gt; Density                       937.608765</span>
<span class="go">INFO&gt; Running-average-Density       937.181557</span>
<span class="go">INFO&gt; Rolling-10-average-Density    929.233405</span>
<span class="go">INFO&gt; *********** Final data to proj-0/systems/final-results ************</span>
<span class="go">INFO&gt; ********************* HTPolyNet runtime ends **********************</span>
</pre></div>
</div>
</section>
<section id="overall-behavior">
<h2>Overall behavior<a class="headerlink" href="#overall-behavior" title="Permalink to this headline">¶</a></h2>
<p>If the build is run with <code class="docutils literal notranslate"><span class="pre">--loglevel</span> <span class="pre">debug</span></code> indicated on the command-line, the log file will contain a lot of information that can be used to characterize the efficiency of the build process.  The <code class="docutils literal notranslate"><span class="pre">HTPolyNet.plot</span></code> module has a method <code class="docutils literal notranslate"><span class="pre">cure_graph</span></code> that can be used to generate plots showing the conversion vs. run time in hours, and the iteration number vs. run time in hours.  Generating this plot from the directory the log file is in can be done using an interactive python session:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">HTPolyNet.plot</span> <span class="kn">import</span> <span class="n">cure_graph</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cure_graph</span><span class="p">([</span><span class="s1">&#39;my_build.log&#39;</span><span class="p">],</span><span class="n">xmax</span><span class="o">=</span><span class="mf">20.</span><span class="p">)</span>
</pre></div>
</div>
<p>We ran 10 independent system builds of 100 monomers each using the provided <code class="docutils literal notranslate"><span class="pre">mol2</span></code> and <code class="docutils literal notranslate"><span class="pre">yaml</span></code> input files; they generated the logs <code class="docutils literal notranslate"><span class="pre">0.log</span></code>, <code class="docutils literal notranslate"><span class="pre">1.log</span></code>, …, <code class="docutils literal notranslate"><span class="pre">9.log</span></code>.  The plot below was made using:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">glob</span> <span class="kn">import</span> <span class="n">glob</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">HTPolyNet.plot</span> <span class="kn">import</span> <span class="n">cure_graph</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cure_graph</span><span class="p">([</span><span class="n">glob</span><span class="p">(</span><span class="s1">&#39;[0-9].log&#39;</span><span class="p">)],</span><span class="n">xmax</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>
</pre></div>
</div>
<img alt="../../_images/iter-graph.png" src="../../_images/iter-graph.png" />
<p>In this case, on a moderately slow workstation, these builds took 10-15 minutes to reach 0.95 conversion, usually in 9 iterations.</p>
<p>Below is a trace of the density vs time as a concatenation of the sequence of all NPT MD simulations, beginning with the initial densification, passing through all drag/relaxationg/equilibrations in each iteration, and concluding with the final equilibration:</p>
<img alt="../../_images/all-density.png" src="../../_images/all-density.png" />
<p>It is clear that during the post-bond relaxations, density drops to 700 kg/m3, but this is because the post-bond relaxations are all run at 600 K.  The equilibrations at 300 K all bring the system back to approx. 900 kg/m3.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">HTPolyNet</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../install.html">Installation and Prerequisites</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user-guide/index.html">User Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Example Tutorials</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Poly(4-methyl styrene)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2-DGEBA-PACM/index.html">DGEBA-PACM Thermoset</a></li>
<li class="toctree-l2"><a class="reference internal" href="../3-VE-STY/index.html">BisGMA-Styrene Thermoset</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../reference-guide/index.html">Reference Guide</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">Example Tutorials</a><ul>
  <li><a href="index.html">Poly(4-methyl styrene)</a><ul>
      <li>Previous: <a href="configuration.html" title="previous chapter">The Configuration File</a></li>
      <li>Next: <a href="../2-DGEBA-PACM/index.html" title="next chapter">DGEBA-PACM Thermoset</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2022, Cameron Abrams, Ming Huang.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.5.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../_sources/example-tutorials/1-polymethylstyrene/run.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>